<navbar></navbar>

<div class="container pt-100 mb-5">
    <div *ngIf="orderSent" class="m-2 text-center">
        <h2>Teşekkür ederiz.</h2>
        <p>Siparişiniz kayıt edildi.</p>
        <button class="btn btn-outline-success" [routerLink]="['/shop']">Alışverişe devam et</button>
    </div>

    <form *ngIf="!orderSent" #form="ngForm" (ngSubmit)="submitOrder(form)" class="m-4">
        <!-- bu formun submit olabilmesi için de aşağıdaki bir buton yardımıyla yaptım -->
        <!-- #form="ngForm" ile form içerisindeki ngModel elemanlarına ulaşacağım -->
        <!-- (ngSubmit)="submitOrder(form)" ile form içerisindeki elemanları göndereceğim -->
        <!-- class="m-4" ile form biraz daha küçülecek -->
        <div class="form-group">
            <label>Name</label>
            <input class="form-control" name="name" #name="ngModel" [(ngModel)]="order.name" required> 
            <span *ngIf="submitted && name.invalid" class="text-danger">Lütfen adınızı giriniz.</span>
        </div>
        <!-- [(ngModel)] ile order classına çift taraflı binding yapacağım 
        bunun için checkout.componen.ts içerisinde ctor 'a Order sınıfından order adında nesne türettim-->
        <!-- #name="ngModel" yapmamın sebebi validation işlemlerini ngModel üzerinden yapacağım. -->
        <div class="form-group">
            <label>Address</label>
            <input class="form-control" name="address" #address="ngModel" [(ngModel)]="order.address" required> 
            <span *ngIf="submitted && address.invalid" class="text-danger">Lütfen adresinizi giriniz.</span>
        </div>
        <!-- #address="ngModel" yapmamın sebebi validation işlemlerini ngModel üzerinden yapacağım. -->
        <div class="form-group">
            <label>City</label>
            <input class="form-control" name="city" #city="ngModel" [(ngModel)]="order.city" required> 
            <span *ngIf="submitted && city.invalid" class="text-danger">Lütfen şehir bilgisi giriniz.</span>
        </div>
        <!-- #city="ngModel" yapmamın sebebi validation işlemlerini ngModel üzerinden yapacağım. -->
        <div class="form-group">
            <label>Phone</label>
            <input class="form-control" name="phone" #phone="ngModel" [(ngModel)]="order.phone" required> 
            <span *ngIf="submitted && phone.invalid" class="text-danger">Lütfen telefonunuzu giriniz.</span>
        </div>
        <!-- #phone="ngModel" yapmamın sebebi validation işlemlerini ngModel üzerinden yapacağım. -->
        <div class="form-group">
            <label>Email</label>
            <input class="form-control" name="email" #email="ngModel" [(ngModel)]="order.email" required> 
            <span *ngIf="submitted && email.invalid" class="text-danger">Lütfen email adresinizi giriniz.</span>
        </div>
        <!-- #email="ngModel" yapmamın sebebi validation işlemlerini ngModel üzerinden yapacağım. -->
        <div class="text-center">
            <button type="submit" class="btn btn-primary">Siparişi Tamamla</button>
            <!-- ilk butona routerLink vermedim çünkü butona tıklanıp form submit olduğunda .ts tarafında submitOrder metodu calısacak -->
            <button type="submit" [routerLink]="['/shop']" class="btn btn-primary ml-2">Alışverişe Devam Et</button>
        </div>    
    </form>
</div>